<div class="briefs-center-wrapper">
  <div class="container">
    <!-- Success Message -->
        <div *ngIf="submitSuccess" class="alert alert-success no-bg">
          <div class="alert-icon">✅</div>
          <div class="alert-content">
            <h3 class="success-title">¡Mensaje enviado correctamente!</h3>
            <p class="success-message">
              Gracias por contactarnos. Responderemos a tu consulta muy pronto.
            </p>
            <button 
              routerLink="/" 
              class="btn-modern large cta-btn mt-3"
              style="margin-top: 1.5rem;"
            >
              <app-icon name="arrow-left" size="18px"></app-icon>
              <span>Volver al Inicio</span>
            </button>
          </div>
        </div>

        <!-- Error Message -->
        <div *ngIf="submitError" class="alert alert-error">
          <div class="alert-icon">❌</div>
          <div class="alert-content">
            <h3>No se pudo enviar el mensaje</h3>
            <p>Por favor, completa todos los campos obligatorios e inténtalo nuevamente.</p>
          </div>
        </div>
    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate class="contact-form elevated-form" *ngIf="!submitSuccess">
    <div class="brief-header">
      <span class="brief-header-icon">
        <app-icon name="landing-page" size="40px"></app-icon>
      </span>
      <h2>Brief para Landing Page</h2>
      <p class="subtitle">Completa este formulario para recibir una propuesta personalizada. <span class="required">*</span> Campos obligatorios</p>
    </div>
    <h3 class="form-section-title">Información Personal</h3>
    <div class="form-row">
      <div class="form-group">
        <label for="name">Nombre y Apellido <span class="required">*</span></label>
        <input id="name" formControlName="name" type="text" [class.error]="f['name'].invalid && submitted" placeholder="Tu nombre completo" />
        <div class="error-message" *ngIf="f['name'].invalid && submitted">Este campo es obligatorio.</div>
      </div>
      <div class="form-group">
        <label for="email">Email <span class="required">*</span></label>
        <input id="email" formControlName="email" type="email" [class.error]="f['email'].invalid && submitted" placeholder="tucorreo@email.com" />
        <div class="error-message" *ngIf="f['email'].invalid && submitted">Ingresa un email válido.</div>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="phone">Teléfono</label>
        <input id="phone" formControlName="phone" type="text" placeholder="Opcional" />
      </div>
      <div class="form-group">
        <label for="company">Empresa</label>
        <input id="company" formControlName="company" type="text" placeholder="Opcional" />
      </div>
    </div>
    <h3 class="form-section-title">Información del Proyecto</h3>
    <div class="form-row">
      <div class="form-group wide">
        <label for="business">¿A qué se dedica tu empresa o proyecto? <span class="required">*</span></label>
        <textarea id="business" formControlName="business" [class.error]="f['business'].invalid && submitted" placeholder="Describe brevemente tu actividad"></textarea>
        <div class="error-message" *ngIf="f['business'].invalid && submitted">Este campo es obligatorio.</div>
      </div>
      <div class="form-group wide">
        <label for="goal">¿Cuál es el objetivo principal de la landing page? <span class="required">*</span></label>
        <textarea id="goal" formControlName="goal" [class.error]="f['goal'].invalid && submitted" placeholder="¿Qué buscas lograr?"></textarea>
        <div class="error-message" *ngIf="f['goal'].invalid && submitted">Este campo es obligatorio.</div>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group wide">
        <label for="audience">¿A quién va dirigida la landing page? <span class="required">*</span></label>
        <textarea id="audience" formControlName="audience" [class.error]="f['audience'].invalid && submitted" placeholder="Describe tu público objetivo"></textarea>
        <div class="error-message" *ngIf="f['audience'].invalid && submitted">Este campo es obligatorio.</div>
      </div>
    </div>
    <h3 class="form-section-title">Contenidos y Marca</h3>
    <div class="form-row">
      <div class="form-group wide">
        <label for="sections">¿Qué secciones debe tener la landing?</label>
        <input id="sections" formControlName="sections" type="text" placeholder="Ej: Hero, Beneficios, CTA, etc." />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="content">¿Tienes textos y/o imágenes listos? <span class="required">*</span></label>
        <select id="content" formControlName="content" [class.error]="f['content'].invalid && submitted">
          <option value="">Selecciona</option>
          <option value="si">Sí</option>
          <option value="no">No</option>
          <option value="parcial">Parcial</option>
        </select>
        <div class="error-message" *ngIf="f['content'].invalid && submitted">Selecciona una opción.</div>
      </div>
      <div class="form-group">
        <label for="branding">¿Tienes logotipo y manual de marca? <span class="required">*</span></label>
        <select id="branding" formControlName="branding" [class.error]="f['branding'].invalid && submitted">
          <option value="">Selecciona</option>
          <option value="si">Sí</option>
          <option value="no">No</option>
        </select>
        <div class="error-message" *ngIf="f['branding'].invalid && submitted">Selecciona una opción.</div>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group wide">
        <label for="references">Ejemplos de páginas que te gustan (links)</label>
        <textarea id="references" formControlName="references" placeholder="Opcional"></textarea>
      </div>
    </div>
    <h3 class="form-section-title">Detalles y Extras</h3>
    <div class="form-row">
      <div class="form-group">
        <label for="contactForm">¿Necesitas formulario de contacto? <span class="required">*</span></label>
        <select id="contactForm" formControlName="contactForm" [class.error]="f['contactForm'].invalid && submitted">
          <option value="">Selecciona</option>
          <option value="si">Sí</option>
          <option value="no">No</option>
        </select>
        <div class="error-message" *ngIf="f['contactForm'].invalid && submitted">Selecciona una opción.</div>
      </div>
      <div class="form-group wide">
        <label for="integrations">¿Integración con herramientas externas? <span class="hint">(Mailchimp, WhatsApp, CRM, etc.)</span></label>
        <input id="integrations" formControlName="integrations" type="text" placeholder="Opcional" />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
      <label for="timeline">Plazo de Entrega</label>
      <select id="timeline" formControlName="timeline">
        <option value="">Selecciona un plazo</option>
        <option value="urgent">Urgente (1-2 semanas)</option>
        <option value="normal">Normal (3-4 semanas)</option>
        <option value="flexible">Flexible (1-2 meses)</option>
        <option value="planning">Solo estoy planificando</option>
      </select>
      </div>
      <div class="form-group wide">
        <label for="comments">Comentarios adicionales</label>
        <textarea id="comments" formControlName="comments" placeholder="¿Algo más que debamos saber?"></textarea>
      </div>
    </div>
    <!-- Honeypot y Captcha sencillo -->
    <div class="form-row">
      <!-- Honeypot: campo oculto para bots -->
      <div class="form-group honeypot" style="position: absolute; left: -9999px; width: 1px; height: 1px; overflow: hidden;">
        <label for="website">No llenar este campo</label>
        <input id="website" formControlName="website" type="text" tabindex="-1" autocomplete="off" />
      </div>
      <!-- Captcha sencillo: pregunta matemática -->
      <div class="form-group captcha-group">
        <label for="captcha">¿Cuánto es 3 + 4? <span class="required">*</span></label>
        <input id="captcha" formControlName="captcha" type="text" [class.error]="f['captcha'].invalid && submitted" maxlength="2" inputmode="numeric" pattern="[0-9]*" placeholder="Tu respuesta" />
        <div class="error-message" *ngIf="f['captcha'].invalid && submitted">Responde correctamente la pregunta.</div>
      </div>
    </div>
    <div class="form-actions">
      <button 
        type="submit"
        class="btn-modern large"
      >
        <app-icon name="send" size="18px"></app-icon>
        <span>Enviar</span>
      </button>
    </div>
  <!-- Mensaje de éxito inline eliminado, ahora solo se usa el mensaje global -->
    </form>
  </div>
</div>

